# 中学硬式野球メディア - ROOKIE SMART

> **非エンジニアでも運用できる、中学硬式野球チームのSEO特化オウンドメディア**  
> 技術スタック: microCMS + Next.js + Cloudflare Pages 
> デザインコンセプト: **サイバーパンク**

サイバーパンクテイストの中学硬式野球チーム検索メディア。
Next.js 14, Tailwind CSS, Framer Motion, Three.js, microCMS を使用しています。

## 🚀 すぐに公開する手順 (Cloudflare Pages)

このコードは Cloudflare Pages で即座にデプロイ可能です。

**📖 詳細な手順は [`CLOUDFLARE_SETUP.md`](./CLOUDFLARE_SETUP.md) を参照してください。**

### クイックスタート

1. **GitHubリポジトリ**: https://github.com/Sawasaka/baseball-media
2. **Cloudflare Pages で連携**
   - Cloudflare Dashboard > Workers & Pages > Create application > Pages > Connect to Git
   - `Sawasaka/baseball-media` を選択

3. **ビルド設定（重要）**
   - **Framework preset**: `Next.js`
   - **Build command**: `npx @cloudflare/next-on-pages@1`
   - **Build output directory**: `.vercel/output/static`
   - **Environment variables**: `NODE_VERSION` = `20`

4. **環境変数（Cloudflare Pages で設定）**
   ```
   MICROCMS_SERVICE_DOMAIN=your-service-domain
   MICROCMS_API_KEY=your-api-key
   NEXT_PUBLIC_BASE_URL=https://your-domain.com
   ```

## 🛠 開発環境のセットアップ

ローカルで編集するには Node.js (v18以上) が必要です。

1. **依存関係のインストール**
   ```bash
   npm install
   ```

2. **環境変数の設定**
   ```bash
   # .env.local を作成して microCMS の情報を入力
   # 設定例は docs/ENV_SETUP.md を参照
   ```

3. **開発サーバー起動**
   ```bash
   npm run dev
   ```
   http://localhost:3000 にアクセス。

## 📂 プロジェクト構成

```
├── app/
│   ├── page.tsx           # トップページ
│   ├── articles/          # 記事一覧・詳細
│   │   ├── page.tsx       # /articles
│   │   └── [slug]/page.tsx # /articles/[slug]
│   ├── category/[slug]/   # カテゴリ別記事一覧
│   ├── tag/[slug]/        # タグ別記事一覧
│   ├── author/[slug]/     # 著者ページ
│   ├── sitemap.ts         # サイトマップ自動生成
│   └── robots.ts          # robots.txt
├── components/            # UIパーツ
├── lib/
│   ├── microcms/          # microCMS クライアント & 型定義
│   │   ├── client.ts      # API クライアント
│   │   ├── types.ts       # TypeScript 型定義
│   │   └── index.ts       # エクスポート
│   └── dummy-data.ts      # チームのダミーデータ
└── public/                # 静的ファイル
```

## 📝 microCMS スキーマ設計

microCMS で以下の API を作成してください（すべてリスト型）:

### articles（記事）
| フィールド名 | 表示名 | 種類 |
|-------------|--------|------|
| title | タイトル | テキストフィールド |
| slug | スラッグ | テキストフィールド |
| body | 本文 | リッチエディタ |
| category | カテゴリ | コンテンツ参照（categories） |
| tags | タグ | 複数コンテンツ参照（tags） |
| author | 著者 | コンテンツ参照（authors） |
| ogImage | OG画像 | 画像 |
| metaDescription | メタ説明 | テキストフィールド |

### categories（カテゴリ）
| フィールド名 | 表示名 | 種類 |
|-------------|--------|------|
| name | カテゴリ名 | テキストフィールド |
| slug | スラッグ | テキストフィールド |
| description | 説明 | テキストエリア |

### tags（タグ）
| フィールド名 | 表示名 | 種類 |
|-------------|--------|------|
| name | タグ名 | テキストフィールド |
| slug | スラッグ | テキストフィールド |

### authors（著者）
| フィールド名 | 表示名 | 種類 |
|-------------|--------|------|
| name | 名前 | テキストフィールド |
| slug | スラッグ | テキストフィールド |
| bio | 自己紹介 | テキストエリア |
| avatar | アバター | 画像 |

## ✅ 実装済み機能

### フロントエンド
- ✅ サイバーパンクUI（ネオンカラー、アニメーション、3D背景）
- ✅ 都道府県タブ（大阪・兵庫）
- ✅ リーグフィルター（ボーイズ・シニア・ヤング）
- ✅ チームカード表示（ダミーデータ10チーム）
- ✅ サブチャンネル5つ（英語、IT、野球塾、スカウト、キャリア）
- ✅ 監修者セクション
- ✅ お問い合わせフォーム
- ✅ お役立ちコラム（モーダル表示）

### CMS連携 (microCMS)
- ✅ 記事一覧・詳細ページ `/articles`, `/articles/[slug]`
- ✅ カテゴリ別記事一覧 `/category/[slug]`
- ✅ タグ別記事一覧 `/tag/[slug]`
- ✅ 著者ページ `/author/[slug]`

### SEO対策
- ✅ 動的メタデータ生成（title, description, OGP, Twitter Card）
- ✅ JSON-LD 構造化データ（Article/BlogPosting, BreadcrumbList）
- ✅ 動的サイトマップ生成（全記事・カテゴリ・タグ・著者を含む）
- ✅ robots.txt
- ✅ パンくずリスト

## ⚾ チームカード追加ルール

チームデータは `data/teams.ts` で管理しています。新しいチームを追加する際は以下のルールを厳守してください。

### 🚀 簡単データ更新（AIアシスタント利用時）

**チーム名とURLを渡すだけで自動更新！**

以下の形式でAIに伝えるだけで、公式HPリンクの紐付けとキャッチコピーの更新が自動で行われます：

```
チーム名: ○○ボーイズ
URL: https://example.com/
```

**複数チームの一括更新も可能：**
```
大阪柏原ボーイズ https://www.ikz.jp/hp/kashibo/
東大阪長田ボーイズ https://nagata-boys.net/
ナガセボーイズ https://nagase-tigers.amebaownd.com/
```

AIが自動で以下を実行します：
1. ✅ 公式HPのURLを `data/teams.ts` に登録
2. ✅ 公式サイトの情報を検索してキャッチコピーを生成
3. ✅ 事実に基づいた内容のみを反映

### 必須ルール

| 項目 | ルール |
|------|--------|
| **公式HP URL** | 必ずチーム公式サイトのURLを確認し、リンク切れがないか検証すること |
| **キャッチコピー** | **公式ページに記載されている事実のみ**に基づくこと。誇張や推測は禁止 |
| **キャッチコピー文字数** | **20〜30文字**を目安に作成。スマホ表示で2行に収まる長さを推奨 |
| **活動エリア（地域）** | **公式ページに記載されている活動拠点**を正確に記載すること |

### ⚠️ キャッチコピー作成の優先順位

カードには「大阪」の横に地域名が表示されるため、**地域情報を繰り返す必要はありません**。

**優先順位（高い順）:**
1. 🥇 **OB・実績**: プロ野球選手輩出、全国大会出場回数、優勝実績など
2. 🥈 **チームの特徴**: 指導方針、施設（専用グラウンド等）、保護者負担の有無
3. 🥉 **理念・スローガン**: 公式サイトに記載されているモットー
4. ⚠️ **地域のみ**: 上記が見つからない場合のみ使用（最終手段）

**❌ 避けるべき表現:**
```
「○○市を拠点に活動する中学硬式野球チーム。」
→ 地域情報はカードに表示済み。特徴がない場合のみ許容

「47期を超える歴史」「37期生まで」など具体的な期数
→ 毎年更新が必要になるためNG
```

**✅ 歴史を表現する場合の代替表現:**
```
「創部1990年の伝統チーム」（設立年は固定なのでOK）
「30年超の歴史を誇る名門」（10年単位の概数ならOK）
「京都屈指の伝統チーム」（抽象的表現でOK）
「歴史と実績のある名門」（抽象的表現でOK）
```

**✅ 優先すべき表現:**
```
「オリックス福田周平を輩出。元気いっぱいの全力野球。」（OB + 特徴）
「専用グラウンド完備。少人数でアットホームなチーム。」（施設 + 特徴）
「教育的指導を重視。保護者負担を最小限に抑えたチーム。」（指導方針 + 特徴）
```

### 📏 キャッチコピーの表示ルール

チームカードではキャッチコピーが**2行で自動的に切り詰め**られます（CSS `line-clamp`）。

**メリット:**
- ✅ カードの高さが揃う
- ✅ CSSのみで実装（レスポンシブ対応）
- ✅ 長文でもレイアウトが崩れない

**推奨文字数:** 20〜30文字（スマホ対応）

```
✅ 良い例（30文字以内）:
「日本一14回。ジャイアンツカップ4回優勝。」
「DeNA阪口皓亮を輩出。全力野球のチーム。」
「専用グラウンド完備。保護者負担軽減。」

❌ 長すぎる例（35文字以上）:
「文武不岐の指導方針。学業・トレーニング・原田メソッドの3本柱。」
→ スマホ表示で途中で切れてしまう
```

### キャッチコピーの作成例

✅ **良い例**（公式サイトの情報に基づく・35文字以内）:
- 「オリックス池田陵真を輩出。春季全国大会12回出場の強豪。」（OB + 実績）
- 「ジャイアンツカップ出場。甲子園選手を多数輩出。」（実績 + OB）
- 「個の育成に特化。NPB・MLBを本気で目指すチーム。」（指導方針）
- 「専用グラウンド完備。保護者の当番なしで活動。」（施設 + 特徴）
- 「正しい考え方・身体の使い方で本当の野球を指導。」（理念）

⚠️ **最終手段**（他に特徴が見つからない場合のみ）:
- 「大阪市住吉区を拠点に活動する中学硬式野球チーム。」

❌ **悪い例**:
- 「関西最強のチーム」（根拠なし）
- 「プロ選手を多数輩出」（具体的な選手名がない）
- 「○○市を拠点に活動する中学硬式野球チーム。」（特徴があるのに地域のみ）
- 「○○を目指す中学硬式野球チーム。全国大会出場多数。」（40文字超過）

### データ追加の流れ

1. **公式HPを検索・確認**
2. **チーム理念・活動拠点を公式ページから抽出**
3. **`data/teams.ts` にデータを追加**
4. **ローカルで表示確認**
5. **Git push で本番反映**

### 🚨 他県チームの検出ルール

チームを特定の都道府県に登録する際、**登録対象の県と異なる県のチームが混在していた場合**は以下の運用を行います：

**AIアシスタントの動作:**

1. **検出時の通知**
   - 登録リストの中に対象県以外のチームが含まれている場合、該当チームを一覧で通知
   ```
   ⚠️ 以下のチームは対象県（大阪府）以外のチームです：
   - 岡山リトルシニア → 岡山県
   - 鳥取中央リトルシニア → 鳥取県
   ```

2. **確認の実施**
   - 「このチームを正しい県（岡山県/鳥取県）に登録しますか？」と確認
   - ユーザーの回答を待ってから処理を続行

3. **登録の実行**
   - 承認された場合: 正しい都道府県に登録
   - 拒否された場合: そのチームはスキップ

**例:**
```
ユーザー: 「兵庫県 シニア 西部ブロック にチーム追加して」
AI: 「以下のチームは兵庫県以外です：
     - 岡山リトルシニア（岡山県）
     - 玉野リトルシニア（岡山県）
     - 鳥取中央リトルシニア（鳥取県）
     これらを正しい県に登録しますか？」
ユーザー: 「はい」
AI: 岡山県・鳥取県にそれぞれ登録を実行
```

## 📝 今後のタスク

1. **microCMS でコンテンツ作成**
   - カテゴリ・タグ・著者を先に作成
   - 記事を作成して公開

2. **本番ドメイン設定**
   - Cloudflare Pages の Custom Domains で独自ドメインを設定
   - `NEXT_PUBLIC_BASE_URL` を本番ドメインに更新

3. **チームデータの拡充**
   - 現在は大阪北支部ボーイズリーグ23チームを登録済み
   - 他の支部・リーグのチームデータを順次追加

---

© 2026 ROOKIE_SMART // ALL_RIGHTS_RESERVED  
BUILD_v2026 // SECTOR_JAPAN
